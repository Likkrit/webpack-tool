var fs=require("fs"),path=require("path"),rules=[],travel=function(e){fs.readdirSync(e).forEach(function(r){var l=path.join(e,r);fs.statSync(l).isDirectory()?travel(l):fileReplace(l)})},fileReplace=function(e){if(!(e+"").indexOf("png")&&!(e+"").indexOf("jpg")){for(var r=fs.readFileSync(e,"utf-8"),l=r,i=0;i<rules.length;i++)l=l.replace(new RegExp(rules[i].key,"ig"),"$1$2"+rules[i].paddingLeft+"$3$4");fs.writeFileSync(e,l)}},parseKey=function(e){for(var r,l,i,n=0;n<e.rules.length;n++)r=e.rules[n],l="(=|url\\()(.?)("+r.content.replace(/\//g,"\\/")+")",l+="(.+.("+r.suffix+"))",i={key:l,paddingLeft:e.rules[n].paddingLeft},rules.push(i),console.log("replace all HTML files with : "+l)};module.exports=function(e){e=e||{},parseKey(e),travel(e.path||"./dist")};